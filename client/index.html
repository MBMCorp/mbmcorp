<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Sans:400,500,600,700,800">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.3.5/css/swiper.min.css">
  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.3.5/js/swiper.min.js"></script>
  <title>MGM</title>
</head>

<body>
  <script>
    window.fbAsyncInit = function () {
      FB.init({
        appId: '270489340449974',
        autoLogAppEvents: true,
        xfbml: true,
        version: 'v3.1'
      });
    };

    (function (d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) { return; }
      js = d.createElement(s); js.id = id;
      js.src = "https://connect.facebook.net/en_US/sdk.js";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));

    function checkLoginState() {
      FB.getLoginStatus(function (response) {
        console.log(response);
        if (response !== undefined || response !== null) {
          $.ajax({
            url: `http://localhost:3000/fb-login`,
            method: "POST",
            data: {
              token: response.authResponse.accessToken
            }
          })
            .done((response) => {
              console.log(response)
              localStorage.setItem('token', response.token);
              localStorage.setItem('email', response.email);
              window.location.href = "http://localhost:8080/dashboard"
            })
            .fail((err) => {
              console.log(err);
            });
        }
      });
    }

  </script>

  <div class="blog-slider">
    <div class="blog-slider__wrp swiper-wrapper">
      <div class="blog-slider__item swiper-slide">
        <div class="blog-slider__img">
          <img src="https://www.techbizze.com/wp-content/uploads/2017/08/free-music-apps-for-iphone.jpg" alt="">
        </div>
        <div class="blog-slider__content">
          <span class="blog-slider__code">Presented By MGM</span>
          <div class="blog-slider__title">Music</div>
          <div class="blog-slider__text">Track Music? Snap a selfie then get playlist based on your mood</div>
          <a href="/register2.html" class="blog-slider__button">Register</a>
          <a href="/login.html" class="blog-slider__button">Login</a>

          <div id="spinner" class="fb"><i class="fa fa-facebook-f"></i></div>

        </div>
      </div>
      <div class="blog-slider__item swiper-slide">
        <div class="blog-slider__img">
          <img src="http://www.citycentremirdif.com/-/media/blogs/2017/resized-images/november/movie-night/21558578_1762180564074950_6998276878874946497_n.jpg?h=600&w=800&la=en&hash=C3667418BF3BE8315CD3A64D9BD03DC0210D398A"
            alt="">
        </div>
        <div class="blog-slider__content">
          <span class="blog-slider__code">Presented By MGM</span>
          <div class="blog-slider__title">Film</div>
          <div class="blog-slider__text">Stay home tonight? Matching your film with your current mood</div>
          <a href="/register2.html" class="blog-slider__button">Register</a>
          <a href="/login.html" class="blog-slider__button">Login</a>

          <div id="spinner1" class="fb"><i class="fa fa-facebook-f"></i></div>

        </div>
      </div>
      <div class="blog-slider__item swiper-slide">
        <div class="blog-slider__img">
          <img src="https://media.istockphoto.com/photos/stack-of-hardback-books-and-open-book-lying-on-bench-picture-id505125698?k=6&m=505125698&s=612x612&w=0&h=8cjQTwoVjQQ-AGOzCUVon68dtVAmhv8QegecdZzaKdw="
            alt="">
        </div>
        <div class="blog-slider__content">
          <span class="blog-slider__code">Presented By MGM</span>
          <div class="blog-slider__title">Book</div>
          <div class="blog-slider__text">Wanna know your matching literary based on your current mood?</div>
          <a href="/register2.html" class="blog-slider__button">Register</a>
          <a href="/login.html" class="blog-slider__button">Login</a>

          <div id="spinner2" class="fb"><i class="fa fa-facebook-f"></i></div>
        </div>
      </div>

      <div class="blog-slider__item swiper-slide">
        <div class="blog-slider__img">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQbflFGXIR-sxkuZkUw0zqubzSMYC_x32gqEFi9rEbDdPcE73N5" alt="">
        </div>
        <div class="blog-slider__content">
          <span class="blog-slider__code">Sponsored by Eazy Co.</span>
          <div class="blog-slider__title">Orange Card</div>
          <div class="blog-slider__text">Wanna be our prioritized member?<br>Sign now with paid-membership</div>
        </div>
      </div>

    </div>
    <div class="blog-slider__pagination"></div>
  </div>



  <script src="index.js"></script>
  <script>
    document.getElementById('spinner').addEventListener('click', function () {

      FB.login(function (response) {
        if (response.authResponse) {

          document.getElementById('spinner').style.display = 'none';
          checkLoginState();
        }
      }, { scope: 'email,public_profile', return_scopes: true });
    }, false);

    document.getElementById('spinner1').addEventListener('click', function () {

      FB.login(function (response) {
        if (response.authResponse) {

          document.getElementById('spinner1').style.display = 'none';
          checkLoginState();
        }
      }, { scope: 'email,public_profile', return_scopes: true });
    }, false);

    document.getElementById('spinner2').addEventListener('click', function () {

      FB.login(function (response) {
        if (response.authResponse) {

          document.getElementById('spinner2').style.display = 'none';
          checkLoginState();
        }
      }, { scope: 'email,public_profile', return_scopes: true });
    }, false);
  </script>
</body>

</html>